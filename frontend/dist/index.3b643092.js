const e=async(e,t,a,r)=>{try{let n=await fetch(`http://localhost:3000/fetch-data?address=${e}&count=${t}&lat=${a}&lon=${r}`);return n=await n.json(),n?.data?.searchQueries?.search?.results||[]}catch(e){return console.log(`Error while fetching data from api : ${e}`),[]}},t=async(t,r,n,o)=>{try{let c=await e(t,r,n,o);return a(c)}catch(e){console.log(`Error in getDataAndGenerateCSVBuffer: ${e}`)}},a=(e=[])=>{try{let t=e.map(e=>{if(!e)return;let t=e.basicPropertyData?.id||"",a=e.displayName?.text||"",r=e.basicPropertyData?.pageName||"",n=e?.priceDisplayInfoIrene?.priceBeforeDiscount?.displayPrice?.amountPerStay?.amount||"";return[t,a,r,n].map(e=>`"${e}"`).join(",")});return["Listing ID,Listing Title,Page Name,Amount Per Stay",...t].join("\n")}catch(e){return console.log(`Error while generating CSV: ${e}`),""}};document.getElementById("downloadExcelButton").addEventListener("click",async function(){let e=document.querySelector("#address").value||"Bangalore",a=parseInt(document.getElementById("rowsperpage").value)||20,r=parseFloat(document.querySelector("#latitude").value),n=parseFloat(document.getElementById("longitude").value),o=new Blob([await t(e,a,r,n)],{type:"text/csv"}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download="Listings.csv",c.click(),URL.revokeObjectURL(c.href)});
//# sourceMappingURL=index.3b643092.js.map
