const e=async(e,t,a,r)=>{try{let a=await fetch(`http://localhost:3000/fetch-data?address=${e}&count=${t}`);return a=await a.json(),a?.data?.searchQueries?.search?.results||[]}catch(e){return console.log(`Error while fetching data from api : ${e}`),[]}},t=async(t,r,n,c)=>{try{let o=await e(t,r,n,c);return a(o)}catch(e){console.log(`Error in getDataAndGenerateCSVBuffer: ${e}`)}},a=(e=[])=>{try{let t=e.map(e=>{if(!e)return;let t=e.basicPropertyData?.id||"",a=e.displayName?.text||"",r=e.basicPropertyData?.pageName||"",n=e?.priceDisplayInfoIrene?.priceBeforeDiscount?.displayPrice?.amountPerStay?.amount||"";return[t,a,r,n].map(e=>`"${e}"`).join(",")});return["Listing ID,Listing Title,Page Name,Amount Per Stay",...t].join("\n")}catch(e){return console.log(`Error while generating CSV: ${e}`),""}};document.getElementById("downloadExcelButton").addEventListener("click",async function(){let e=document.querySelector("#address").value||"Bangalore",a=parseInt(document.getElementById("rowsperpage").value)||20,r=new Blob([await t(e,a,null,null)],{type:"text/csv"}),n=document.createElement("a");n.href=URL.createObjectURL(r),n.download="Listings.csv",n.click(),URL.revokeObjectURL(n.href)});
//# sourceMappingURL=index.c746a89b.js.map
